<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>仿百度音乐盒</title>
<link rel="stylesheet" type="text/css" href="css/style.css">
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="js/musicapi.js"></script>
</head>

<body>
<!-- 顶部 -->
<div id="top">
	<div class="logo"></div>
    <div class="search">
    	<input type="text" placeholder="输入歌曲、歌手">
        <button class="search-btn"></button>
    </div>
    <!--<span style="line-height:22px; color:#fff; padding-left:10px; display:inline-block; overflow:hidden;">
    	收藏、删除、添加到自定义歌单功能未做 有兴趣的朋友可以拿去修改添加<br>
    	由于百度服务器屏蔽了所有外部服务器环境下(包括locahost)的文件访问请求  所以目前只能以文件打开方式使用
        <a style="color:#f00; text-decoration:underline;" href="music.rar">点击下载</a>
    </span>-->
</div>
<!-- 顶部end -->
<!-- 主体 -->
<div id="main">
	<div class="main-warp">
        <div class="leftbar">
        	<div class="leftbar-wrapper">
                <ul class="temp-list">
                    <li><a class="recommand cur">推荐歌曲</a></li>
                    <li><a class="artist">热门歌手</a></li>
                    <li><a class="classify" typeid="1">新歌榜</a></li>
                    <li><a class="classify" typeid="2">热歌榜</a></li>
                    <li><a class="classify" typeid="6">KTV热歌榜</a></li>
                    <li><a class="classify" typeid="11">摇滚榜</a></li>
                    <li><a class="classify" typeid="20">华语金曲榜</a></li>
                    <li><a class="classify" typeid="21">欧美金曲榜</a></li>
                    <li><a class="classify" typeid="22">经典老歌榜</a></li>
                    <li><a class="classify" typeid="23">情歌对唱榜</a></li>
                    <li><a class="classify" typeid="24">影视金曲榜</a></li>
                    <li><a class="classify" typeid="25">网络歌曲榜</a></li>
                </ul>
                <dl class="my-music">
                    <dt>我的音乐</dt>
                    <dd><a class="collect">我的收藏</a></dd>
                    <dd><a class="collectlist">我最喜欢</a></dd>
                </dl>
                <a class="addList">+ 新建</a>
            </div>
        </div>
        
        <div class="content">
        	<div id="artist-list">
            	<div class="artist-view-tab">
                	<span class="title">歌手</span><span class="total"></span>
                </div>
                <div class="artist-view-content">
                	<ul class="hot-artist">
                    	<!--<li>
                        	<a>
                            	<img src="http://musicdata.baidu.com/115414885.jpg" width="130" height="130" alt="蔡淳佳">
                                <div class="artist-name"><span>蔡淳佳</span></div>
                            </a>
                        </li>-->
                    </ul>
                </div>
            </div>
        	<div class="song-list">
            	<div class="song-list-header">
                	<div class="songName">歌曲</div>
                    <div class="artistName">歌手</div>
                    <div class="albumName">专辑</div>
                </div>
                <div class="songList-wrapper">
                    <ul class="songList">
                        <!--<li>
                        	<div class="songName">
                        		<span class="checkbox"><input type="checkbox" ></span>
                                <span class="icon"></span>
                                <span><a class="song-name">一吻之间</a></span>
                            </div>
                            <div class="artistName">
                            	<a class="artist-name">张碧晨</a>
                            </div>
                            <div class="albumName">
                            	<span><a class="album-name">《青年医生 电视原声带》</a></span>
                            	<span class="opt">
                                    <a class="favor" title="收藏">&nbsp;</a>
                                    <a class="add" title="添加到歌单">&nbsp;</a>
                                    <a class="download" title="下载歌曲">&nbsp;</a>
                                    <a class="delete" title="从列表中删除">&nbsp;</a>
                                </span>
                            </div>
                        </li>-->
                        
                    </ul>
                </div>
                <div id="myFooter" class="no-checked">
                    <div class="select-all-combo">
                        <div class="select-all-checkbox"><input type="checkbox" name="select-all" ></div>
                        <div class="select-all-text">全选</div>
                    </div>
                    <div class="store-button"></div>
                    <div class="add-button"></div>
                    <div class="delete-button"></div>
                    <div class="playlist-length">共有<span>99</span>首歌</div>
                </div>
            </div>
        </div>
        
        <div class="lrcbox">
        	<div class="album-wrapper">
                <div class="album">
                    <img width="135" height="135" src="">
                    <div class="album-name"></div>
                </div>
                <div class="split"></div>
            </div>
            <div class="lrc-wrapper">
            	<div class="no-lrc">
                    <span class="no-lrc-hint">该歌曲暂时没有歌词</span>
                </div>
                <ul>
                    <!--<li class="ui-lrc-sentence ui-lrc-current">挥手之后 离去</li>-->
                    
                </ul>
            </div>
            
        </div>
    </div>
</div>
<!-- 主题end -->
<!-- 底部 -->
<div id="bottom">
	<div style="display:none">
        <audio id="myaudio" preload="auto"></audio>
    </div>
	<div class="left-panel">
    	<a class="prev" title="上一首"></a>
        <a class="play stop" title="播放"></a>
        <a class="next" title="下一首"></a>
    </div>
    <div class="main-panel">
    	<div class="panel-title">
        	<div class="title">
                <a class="song-name">歌曲名</a>
                <span class="split">-</span>
                <a class="artist">演唱者</a>
            </div>
            <ul class="icons">
            	<li><a class="favor" title="收藏"></a></li>
                <li><a class="download" title="下载"></a></li>
            </ul>
        </div>
        <div class="pane">
        	<div class="progress-wrapper">
            	<div class="loaded" style="width:0%;"></div>
                <div class="progressing" style="width:0%;">
                	<a class="focus"></a>
                </div>
            </div>
            <div class="time" id="timeWrap">
                <span class="curTime">00:00</span>
                <span class="split">/</span>
                <span class="totalTime">00:00</span>
            </div>
            <ul class="playmodel">
            	<li><a class="random"></a></li>
                <li><a class="single"></a></li>
                <li><a class="cycle cur"></a></li>
            </ul>
            <div class="volume" id="volumeWrap">
                <a class="mute" title="静音"></a>
                <div class="vol-slider-wrapper">
                	<div class="vol-slider-bar"></div>
                    <div id="volSlider" class="vol-slider" style="width:20%;">
                        <a class="focus"></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 底部end -->
<div style="display:none;">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fbf1d783442c38919279116257c1b5a5c' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1000534986'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1000534986%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</div>
</body>
</html>
<script type="text/javascript" src="js/audio.js"></script>
<script type="text/javascript" src="js/lrc.js"></script>
<script type="text/javascript" src="js/main.js"></script>
<script type="text/javascript">
//实例化播放器
var myaudio = new Music({
	player : "myaudio"
});
$(function(){
	bindPlayEvent();
	$(".left-panel .prev").click(function(){
		myaudio.prev();
	})
	$(".left-panel .next").click(function(){
		myaudio.next();
	})
	$(".play").click(function(){
		if(!myaudio.audio.src){
			$(".songList li").first().trigger("dblclick");
		}
		if($(this).hasClass("stop")){
			$(this).removeClass("stop");
			myaudio.audio.play();
			AnalyzeLrc.begin();
			Player.interval();
		}else{
			$(this).addClass("stop");
			myaudio.pause();
		}
	})
	$(".playmodel a").click(function(){
		if($(this).hasClass("cur")){return;}
		if(!myaudio.playing){ return;}
		myaudio.changeModel($(this).attr("class"));
		$(".playmodel a").removeClass("cur");
		$(this).addClass("cur");
	})
	$("#volumeWrap .mute").click(function(){
		$(this).toggleClass("muted");
		if($(this).hasClass("muted")){
			myaudio.mute();
		}else{
			myaudio.cancelmute();
		}
		$("#volSlider").width(myaudio.audio.volume*100+"%");
	})
	$(".progress-wrapper").click(function(e){ console.log(1);
		var x = e.pageX,left = $(this).offset().left;
		var percent = (x-left)/$(this).width();
		var curTime = Math.round(myaudio.audio.duration*percent);
		myaudio.audio.currentTime = curTime;
	})
	/*$(".progress-wrapper .focus").on("mousedown",function(e){
		e.stopPropagation();
		Player.pause();
		$(this).off("mousemove").on("mousemove",function(ev){
			var sx = ev.pageX,left = $(this).parent(".progressing").offset().left;
			$(this).parent(".progressing").width(sx-left);
		})
		$(this).off("mouseup").on("mouseup",function(ev){
			var sx = ev.pageX,left = $(this).parent(".progressing").offset().left;
			var percent = (sx-left)/$(".progress-wrapper").width();
			var curTime = Math.round(myaudio.audio.duration*percent);
			myaudio.audio.currentTime = curTime;
			Player.interval();
		})
	})*/
	$(".vol-slider-wrapper").click(function(e){
		var x = e.pageX,left = $(this).offset().left;
		var percent = (x-left)/$(this).width();
		var volume = Math.floor(percent*100)/100;
		myaudio.volume(volume);
		$("#volSlider").width(volume*100+"%");
	})
})

$(function(){
	$(".temp-list a").click(function(){
		$(this).addClass("cur").parent("li").siblings().find("a").removeClass("cur");
		if($(this).attr("class").indexOf("artist")>=0){
			$("#artist-list").show();
			$(".song-list").hide();
		}else{
			$("#artist-list").hide();
			$(".song-list").show();
		}
	})
})
$(function(){
	BaiduMusic.getListByRecommand(13139680,20,ShowRecommandList);
	//推荐列表
	$(".recommand").click(function(){
		BaiduMusic.getListByRecommand(13139680,1000,ShowRecommandList);
	})
	//热门歌手列表
	$(".temp-list .artist").click(function(){
		BaiduMusic.getListByClass(26,300,ShowArtistList);
	})
	
	//排行榜
	$(".classify").click(function(){
		BaiduMusic.getListByClass($(this).attr("typeid"),1000,ShowClassifyList)
	})
	
	//点击热门歌手列表获取歌手的作品列表
	$(".hot-artist li a").live("click",function(){
		BaiduMusic.getListByArtist($(this).attr("ting_uid"),200,showSongListByArtist)
	})
	
	//搜索
	$(".search-btn").click(function(){
		var sib = $(this).siblings("input[type=text]")
		var keyword = sib.val();
		if(keyword=="" || /\s+/g.test(keyword)){
			sib.val("");
			return;
		}
		BaiduMusic.search(keyword,showSearchResult);
	})
	//双击加载
	$(".songList li").live("dblclick",function(){
		var songid = $(this).attr("song_id");
		BaiduMusic.downloadSong(songid,loadSelectSong);
	})
	
})
</script>